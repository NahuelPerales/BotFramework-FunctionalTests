name: $(Build.BuildId)
trigger: none
pr: none

pool:
  vmImage: 'windows-2019'

variables:
- name: testNull
  value: ''
  # BuildConfiguration: 'Debug'
  # BuildPlatform: 'AnyCPU'
  # Name: (optional) Define in Azure
  # LastName: (optional) Define in Azure
  #IntLastName: $[coalesce(variables['LastName'], '')]

stages:
- stage: SecondStage
  condition: ne('${{ variables.testNull }}', '')
  jobs:
    - job: CheckLastName
      steps:
        - powershell: |
            if (-not([System.String]::IsNullOrEmpty('$(IntLastName)'))) {
              Write-Host "LastName: '$(IntLastName)'"
            }
            else {
              Write-Host "Empty LastName"
            }
            Write-Host "##vso[task.setvariable variable=apellido]$($(IntLastName))"
          failOnStderr: true
        - powershell: |
            if ($(apellido) -ne '') {
              Write-Host "LastName: '$env:IntLastName'"
            }
            else {
              Write-Host "apellido vac√≠o"
            }

          failOnStderr: true
